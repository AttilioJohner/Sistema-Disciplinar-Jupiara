# üè´ EECM - Dockerfile otimizado para WAHA no Koyeb
FROM devlikeapro/waha:latest

# Configura√ß√µes de produ√ß√£o
ENV NODE_ENV=production
ENV WAHA_PRINT_QR=false
ENV WAHA_SESSION_STORE_TYPE=file

# Volume para persist√™ncia de sess√µes
VOLUME ["/tmp/whatsapp-files"]

# Porta padr√£o
EXPOSE 3000

# Health check
HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \
  CMD curl -f http://localhost:3000/ping || exit 1

# Comando de inicializa√ß√£o
CMD ["node", "dist/main.js"]